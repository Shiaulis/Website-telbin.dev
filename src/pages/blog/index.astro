---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Navigation from '../../components/Navigation.astro';
import Footer from '../../components/Footer.astro';
import '../../styles/global.css';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout
	title="Blog | Andrius Shiaulis"
	description="Thoughts on iOS development, Swift, and software engineering"
>
	<Navigation />
	<main>
		<section class="blog-section">
			<h1>Blog</h1>
			<p class="blog-intro">Thoughts on iOS development, Swift, and software engineering</p>

			<div class="blog-posts">
				{posts.map((post) => (
					<article class="blog-post-card">
						<a href={`/blog/${post.slug}/`}>
							<h2>{post.data.title}</h2>
							<p class="post-date">
								{post.data.pubDate.toLocaleDateString('en-US', {
									year: 'numeric',
									month: 'long',
									day: 'numeric'
								})}
							</p>
							<p class="post-description">{post.data.description}</p>
							{post.data.tags && post.data.tags.length > 0 && (
								<div class="post-tags">
									{post.data.tags.map((tag) => (
										<span class="tag">{tag}</span>
									))}
								</div>
							)}
						</a>
					</article>
				))}
			</div>
		</section>
	</main>
	<Footer />
</BaseLayout>
